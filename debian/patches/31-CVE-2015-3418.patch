Description: dix: Allow zero-height PutImage requests
Author: Keith Packard <keithp@keithp.com>
Abstract:
 The length checking code validates PutImage height and byte width by
 making sure that byte-width >= INT32_MAX / height. If height is zero,
 this generates a divide by zero exception. Allow zero height requests
 explicitly, bypassing the INT32_MAX check.

--- a/dix/dispatch.c
+++ b/dix/dispatch.c
@@ -2056,7 +2056,7 @@
     tmpImage = (char *)&stuff[1];
     lengthProto = length;
 	
-    if (lengthProto >= (INT32_MAX / stuff->height))
+    if (stuff->height != 0 && lengthProto >= (INT32_MAX / stuff->height))
         return BadLength;
 
     if ((bytes_to_int32(lengthProto * stuff->height) +
